# Action 行动

DaisyTools 依靠 action 执行具体的功能。因此 action 直接影响到了 DaisyTools 的实用性。

为了简化 action 的开发，我们开发了`aster_macro`和`aster_codegen`，可借助宏极大地简化开发复杂度。

## 设计思想

### A. 声明式优先

- 一切对 UI/编排/校验有价值的信息都应**以注解/标注**写在源码旁（靠近事实来源）。
- 默认**可推断**的部分不要求显式声明；无法推断时再显式覆盖（渐进披露）。
- 文案与表单元数据**共用同一处声明**（避免多源真相）。

### B. 高内聚

- 一个 Action 覆盖一个清晰的业务意图，相关的元信息（参数、i18n、校验、分支、插头）**与实现并置**。
- “一件事一个 Action”；拆分过细会增加编排复杂度，过粗会使复用下降——以**用户编排粒度**为准。
- 依赖通过**显式输入**传入；禁止静态全局状态与隐式外部影响。

### C. 仅编写必要代码

靠**约定优于配置**、**合理默认值**与**自动生成**消除样板。

- 默认即可；只有当默认不合适时才覆写。
- 生成的内容应当**可读、可检查**（错误尽早在编译期或装配期暴露）。
- 错误信息要**指向性强**（告诉用户应该补充哪一条声明）。

### D. 开发者亦用户（DX 与 UX 同权）

把“开发者使用 DaisyTools 开发/调试 Action 的体验”视为第一等公民，和终端用户体验同等优先。

- **人体工程学**：给开发者符合直觉的开发体验。
- **单一信息源**：源码中的注解 → 自动生成表单、文档、类型声明（TS d.ts）、示例与 i18n；一处修改，多处生效。
- **等权入口**：CLI 与 UI 操作**等价**（可脚本化），支持最小可复现的**Playground/沙箱重放**。
