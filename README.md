# DaisyTools

DaisyTools 是一个基于 Windows 服务的强大自动化工具箱，采用 Rust + Tauri 技术栈构建，提供可视化的工作流编辑和强大的自动化能力。

## 🎯 核心概念

### 三大核心组件

- **Trigger (触发器)** - 定义何时执行任务 (如定时、文件变化、系统事件等)
- **Action (动作)** - 定义具体要执行的操作 (如网络请求、程序执行、文件操作等)
- **Task (任务)** - 将触发器与动作序列组合成完整的自动化流程

### 卡片系统

- **模板卡片** - 未配置的功能模板，需要填入参数
- **点亮卡片** - 已配置完成的可复用组件，可在工作流中使用
- **插头机制** - 点亮卡片导出类型化的数据接口，实现安全的数据传递

## 🏗️ 系统架构

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   前端界面      │    │   Tauri IPC     │    │  Windows 服务   │
│   (Vue.js)      │◄──►│                 │◄──►│   (Rust Core)   │
│                 │    │                 │    │                 │
│ • 卡片编辑器    │    │ • 命令路由      │    │ • 任务调度器    │
│ • 工作流设计器  │    │ • 数据序列化    │    │ • 触发器引擎    │
│ • 可视化连接    │    │ • 权限控制      │    │ • 动作执行器    │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

### 技术栈

- **后端服务**: Rust + Windows Service + Tokio 异步运行时
- **前端界面**: Vue.js + TypeScript + Vite
- **桌面应用**: Tauri Framework
- **数据存储**: JSON 文件 + 文件监听热重载

## ✨ 主要特性

### 🔧 丰富的触发器类型

- **时间触发器** - Cron 表达式定时执行
- **间隔触发器** - 固定时间间隔执行
- **命令触发器** - 系统命令或信号触发
- **文件监听** - 文件系统变化触发

### ⚡ 强大的动作能力

- **程序执行** - 运行系统程序或脚本
- **网络请求** - HTTP/HTTPS API 调用
- **JavaScript 执行** - 内嵌 JS 引擎支持复杂逻辑
- **命令执行** - 系统命令行操作

### 🎨 可视化工作流编辑

- **拖拽式界面** - 直观的节点连接编辑器
- **类型安全连接** - 插头系统确保数据类型匹配
- **实时预览** - 数据流向可视化
- **调试支持** - 执行状态监控和错误追踪

### 🔌 插头数据流系统

- **类型化接口** - 每个动作导出强类型的输入输出插头
- **数据转换** - 支持 JsonPath、模板等多种数据映射方式
- **智能推导** - 基于配置自动推断输出数据类型

## 🚀 快速开始

### 系统要求

- Windows 10/11 (x64)
- 管理员权限 (用于 Windows 服务安装)

### 安装步骤

1. **下载应用**

   ```bash
   # 从 Releases 下载预编译版本
   # 或克隆源码编译
   git clone https://github.com/user/daisytools.git
   ```

2. **安装服务**

   ```bash
   # 以管理员身份运行
   daisytools.exe install-service

   # 启动服务
   daisytools.exe start-service
   ```

3. **启动应用**
   ```bash
   # 启动桌面应用
   daisytools.exe
   ```

### 创建第一个自动化任务

1. **创建触发器**

   - 选择 "Cron 触发器" 模板
   - 填入 Cron 表达式 (如 `0 */5 * * * *` 每 5 分钟执行)
   - 点亮触发器卡片

2. **创建动作**

   - 选择 "HTTP 请求" 模板
   - 配置 URL、请求方法等参数
   - 点亮动作卡片

3. **组装工作流**

   - 在工作流编辑器中拖入卡片
   - 连接触发器到动作
   - 配置数据映射关系

4. **部署执行**
   - 保存工作流配置
   - 服务自动加载并开始执行

## 🔧 开发指南

### 编译环境

```bash
# 安装 Rust 工具链
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# 安装前端依赖
npm install -g pnpm
pnpm install

# 编译项目
pnpm tauri build
```

### 项目结构

```
daisytools/
├── aster_macro/    # 宏定义
├── aster_codegen/  # 代码生成
├── daisytools/          # 桌面应用
├── src-tauri/           # Rust 后端代码
│   ├── src/
│   │   ├── service/     # 服务核心
│   │   │   ├── trigger/ # 触发器实现
│   │   │   ├── action/  # 动作实现
│   │   │   └── task/    # 任务调度
│   │   ├── ipc/         # IPC 通信
│   │   ├── runtime/     # 脚本运行时
│   │   └── utils/       # 工具函数
│   └── Cargo.toml
├── src/                 # Vue.js 前端代码
│   ├── components/      # UI 组件
│   ├── views/           # 页面视图
│   ├── composable/      # 组合式函数
│   └── utils/           # 前端工具
└── js_engine/           # JavaScript 引擎(基于webview)
```

## 拓展机制

daisyTools 支持多种拓展机制，包括：

### JavaScript 拓展

daisyTools 支持使用 JavaScript 编写拓展，可通过内置的 quickjs 引擎运行，并支持部分的 nodejs api。
这种拓展可以便捷的实现动态的功能，无需其他环境，利用 AI 辅助开发，在无代码基础的情况下，可以快速实现自定义功能。

### Rust 拓展

daisyTools 支持使用 Rust 编写拓展，通过 Rust 的强大能力，可以实现更复杂的功能，以及更高效的性能。
同时，Rust 也支持多种方式进行拓展，如：

- 动态库拓展
- 可执行程序拓展
- wasm 拓展

## 📊 使用场景

- **系统监控** - 定时检查系统状态，异常时发送通知
- **数据同步** - 定期同步不同系统间的数据
- **文件处理** - 监听文件变化，自动处理上传或转换
- **API 集成** - 连接多个 API 服务，实现数据流转
- **报告生成** - 定时收集数据并生成报告
- **备份任务** - 自动化数据备份和清理

## 🤝 贡献指南

欢迎提交 Pull Request！在贡献前请：

1. Fork 项目并创建功能分支
2. 遵循现有代码风格和架构
3. 添加相应的测试用例
4. 更新相关文档
5. 确保所有测试通过

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

## 🔗 相关链接

- [架构设计文档](docs/architecture.md)
- [API 参考](docs/api.md)
- [扩展开发指南](docs/development.md)
- [问题反馈](https://github.com/user/daisytools/issues)

---

**DaisyTools** - 让自动化更简单，让工作流更智能 🌼
